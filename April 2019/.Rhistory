# Target
Gamma_long<-(0:(K))<=K*cutoff_long/pi+1.e-9
#----------------
# Estimation based on MDFA-MSE wrapper
mdfa_obj_mse_long<-MDFA_mse(L,weight_func,Lag,Gamma_long)$mdfa_obj
b_long<-mdfa_obj_mse_long$b
# Normalize coefficients: amplitude in zero is 1: this is needed for MA-cross to cancel unit-root of original data
b_long<-b_long/sum(b_long)
# Plot of amplitude
if (plot_T)
{
plot(abs(mdfa_obj_mse_long$trffkt),type="l",main=paste("Amplitude concurrent, denseness=",K,sep=""),
axes=F,xlab="Frequency",ylab="Amplitude",col="black",ylim=c(0,1))
axis(1,at=c(0,1:6*K/6+1),labels=c("0","pi/6","2pi/6","3pi/6",
"4pi/6","5pi/6","pi"))
axis(2)
box()
}
ts.plot(b_short-b_long)
sum(b_short-b_long)
K<-240
# Spectrum: white noise assumption
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity_short<-5
periodicity_long<-10
Lag<-0
L<-200
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
plot_T<-F
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
source('C:/wia_desktop/Archive/2018/Blog/Tutorials/April 2019/mdfa_mse_trade_func.R')
plot_T<-F
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity_short<-2.5
periodicity_long<-10
Lag<-0
L<-200
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-F
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity_short<-1.5
periodicity_long<-10
Lag<-0
L<-200
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-F
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity_short<-2.5
periodicity_long<-10
Lag<-0
L<-200
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
source('C:/wia_desktop/Archive/2018/Blog/Tutorials/April 2019/mdfa_mse_trade_func.R')
K<-240
# Spectrum: white noise assumption
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity_short<-2.5
periodicity_long<-10
Lag<-0
L<-20
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
K<-240
# Spectrum: white noise assumption
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity_short<-2.5
periodicity_long<-10
Lag<--1
L<-20
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity_short<-2.5
periodicity_long<-5
Lag<--1
L<-20
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity_short<-2.5
periodicity_long<-20
Lag<--1
L<-20
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
K<-240
# Spectrum: white noise assumption
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity_short<-2.5
periodicity_long<-20
Lag<--2
L<-20
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
K<-2400
# Spectrum: white noise assumption
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity_short<-2.5
periodicity_long<-20
Lag<--2
L<-20
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
K<-2400
# Spectrum: white noise assumption
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity_short<-2.5
periodicity_long<-20
Lag<--2
L<-200
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
x<-na.exclude(log_FX_mat[,asset])
plot_T<-T
ma_cross_mse_obj<-ma_cross_mdfa_mse_trade_func(K,periodicity_short,periodicity_long,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
x<-na.exclude(diff(log_FX_mat[,asset]))
x
x<-na.exclude(diff(log_FX_mat[,asset]))
K<-600
# Spectrum: white noise assumption
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity<-2.5
Lag<-0
L<-200
L<-min(2*K,L)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
source('C:/wia_desktop/Archive/2018/Blog/Tutorials/April 2019/mdfa_mse_trade_func.R')
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-5
Lag<-0
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-10
Lag<-0
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-20
Lag<-0
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-100
Lag<-0
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
x<-na.exclude(diff(log_FX_mat[,asset]))
K<-600
# Spectrum: white noise assumption
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity<-100
Lag<--1
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-10
Lag<--1
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-5
Lag<--1
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-2.5
Lag<--1
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity<-2.5
Lag<--2
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-100
Lag<--2
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
sign_day_of_week<-rep(1,5)
sign_day_of_week[5]<--1
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-10
Lag<--2
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
sign_day_of_week[5]<--1
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-20
Lag<--2
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
sign_day_of_week[5]<--1
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-5
Lag<--2
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
sign_day_of_week[5]<--1
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-2.5
Lag<--2
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
sign_day_of_week[5]<--1
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity<-2.5
Lag<--0
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
sign_day_of_week[5]<--1
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
periodicity<-100
Lag<--0
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
sign_day_of_week[5]<--1
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity<-100
Lag<--1
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
sign_day_of_week[5]<--1
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
# This function is in mdfa_mse_trade_func.r
# MSE estimation and trading: sign rule and signal weighting
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
x<-na.exclude(diff(log_FX_mat[,asset]))
K<-600
# Spectrum: white noise assumption
weight_func<-matrix(rep(1,2*(K+1)),ncol=2)
#weight_func[1,]<-1000
periodicity<-100
Lag<--1
L<-200
L<-min(2*K,L)
sign_day_of_week<-rep(1,5)
#sign_day_of_week[5]<--1
plot_T<-F
asset<-"EURUSD"
lag_fx<-1
plot_T<-T
mdfa_mse_trade_obj<-mdfa_mse_trade_func(K,periodicity,L,Lag,lag_fx,x,plot_T,weight_func,sign_day_of_week)
x
acf(x)
rm(list=ls())
library(xts)
#install.packages("devtools")
library(devtools)
# Load MDFA package from github
devtools::install_github("wiaidp/MDFA")
# MDFA package: EURUSD is now part of the data in the package
library(MDFA)
#-----------------------------------------------------------------------------------------------
# Data: FX and SP500 (the latter has a marked trend)
data_from_IB<-T
hour_of_day<-"16:00"
reload_sp500<-F
path.dat<-"C:\\wia_desktop\\2019\\Projekte\\IB\\daily_pick\\Data\\IB\\"
data_load_obj<-data_load_gzd_trading_func(data_from_IB,hour_of_day,reload_sp500,path.dat)
mydata<-data_load_obj$mydata
xts_data_mat<-data_load_obj$xts_data_mat
colnames(xts_data_mat)
rm(list=ls())
library(xts)
#install.packages("devtools")
library(devtools)
# Load MDFA package from github
devtools::install_github("wiaidp/MDFA")
# MDFA package: EURUSD is now part of the data in the package
library(MDFA)
#-----------------------------------------------------------------------------------------------
# Data: FX and SP500 (the latter has a marked trend)
data_from_IB<-T
hour_of_day<-"16:00"
reload_sp500<-F
path.dat<-"C:\\wia_desktop\\2019\\Projekte\\IB\\daily_pick\\Data\\IB\\"
data_load_obj<-data_load_gzd_trading_func(data_from_IB,hour_of_day,reload_sp500,path.dat)
mydata<-data_load_obj$mydata
xts_data_mat<-data_load_obj$xts_data_mat
colnames(xts_data_mat)
source("R/data_load_functions.R")
data_from_IB<-T
hour_of_day<-"16:00"
reload_sp500<-F
path.dat<-"C:\\wia_desktop\\2019\\Projekte\\IB\\daily_pick\\Data\\IB\\"
data_load_obj<-data_load_gzd_trading_func(data_from_IB,hour_of_day,reload_sp500,path.dat)
mydata<-data_load_obj$mydata
xts_data_mat<-data_load_obj$xts_data_mat
colnames(xts_data_mat)
source("data_load_functions.R")
data_from_IB<-T
hour_of_day<-"16:00"
reload_sp500<-F
path.dat<-"C:\\wia_desktop\\2019\\Projekte\\IB\\daily_pick\\Data\\IB\\"
data_load_obj<-data_load_gzd_trading_func(data_from_IB,hour_of_day,reload_sp500,path.dat)
mydata<-data_load_obj$mydata
xts_data_mat<-data_load_obj$xts_data_mat
colnames(xts_data_mat)
getwd()
